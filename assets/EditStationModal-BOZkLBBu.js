import{r as a,j as e,M as k,a as y,b as M,c as v,d as T,V as H,F as n,H as b,S as B,C as E,e as F,T as I,B as g}from"./index-sKHbvJ3_.js";import{M as U,a as L}from"./chunk-RAWN7VJ3-9PTjqYaC.js";import{F as t,I as P}from"./chunk-6CVSDS6C-BhvIOWwG.js";import{T as V}from"./chunk-4IH3O7BJ-Chrn4AQW.js";const W=({isOpen:p,onClose:l,onUpdate:f,station:r})=>{const[d,h]=a.useState((r==null?void 0:r.is24Hours)||!1),[i,x]=a.useState((r==null?void 0:r.comment)||""),[C,u]=a.useState(null),[o,j]=a.useState((r==null?void 0:r.markerType)||"charging"),[c,m]=a.useState(!1);a.useEffect(()=>{r&&(h(r.is24Hours||!1),x(r.comment||""),j(r.markerType||"charging"),u(null))},[r]);const S=async()=>{if(!c){m(!0);try{await f({is24Hours:d,comment:i,photo:C,markerType:o}),l()}catch(s){console.error("Error updating station:",s)}finally{m(!1)}}};return e.jsxs(k,{isOpen:p,onClose:l,children:[e.jsx(y,{}),e.jsxs(U,{children:[e.jsx(M,{children:"Редактировать место"}),e.jsx(v,{}),e.jsx(T,{children:e.jsxs(H,{spacing:4,children:[e.jsxs(n,{children:[e.jsx(t,{children:"Тип метки"}),e.jsxs(b,{children:[e.jsxs(B,{value:o,onChange:s=>j(s.target.value),children:[e.jsx("option",{value:"charging",children:"Обычная розетка"}),e.jsx("option",{value:"chargingAuto",children:"Автомобильная зарядка"}),e.jsx("option",{value:"danger",children:"Опасное место"}),e.jsx("option",{value:"chat",children:"Разговорчики"})]}),o==="charging"&&e.jsx(E,{isChecked:d,onChange:s=>h(s.target.checked),children:"Ночная"})]})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Комментарий"}),e.jsx(V,{value:i,onChange:s=>x(s.target.value),placeholder:"Опишите место"})]}),e.jsxs(n,{children:[e.jsx(t,{children:"Фото"}),e.jsx(P,{type:"file",accept:"image/*",onChange:s=>u(s.target.files[0])})]}),r&&r.photo&&e.jsxs(F,{children:[e.jsx(I,{children:"Текущее фото:"}),e.jsx("img",{src:r.photo,alt:"Current",style:{maxWidth:"100px",maxHeight:"100px"}})]})]})}),e.jsxs(L,{children:[e.jsx(g,{colorScheme:"blue",mr:3,onClick:S,isLoading:c,loadingText:"Обновление...",disabled:c,children:"Обновить"}),e.jsx(g,{variant:"ghost",onClick:l,children:"Отмена"})]})]})]})};export{W as default};
