import{r as a,j as e,M as C,a as M,b as k,c as y,d as F,V as b,F as l,H,S as T,C as B,B as m}from"./index-sKHbvJ3_.js";import{M as I,a as A}from"./chunk-RAWN7VJ3-9PTjqYaC.js";import{F as i,I as E}from"./chunk-6CVSDS6C-BhvIOWwG.js";import{T as L}from"./chunk-4IH3O7BJ-Chrn4AQW.js";const R=({isOpen:p,onClose:t,onSave:S})=>{const[n,c]=a.useState("charging"),[d,h]=a.useState(!1),[x,j]=a.useState(""),[v,u]=a.useState(null),[o,g]=a.useState(!1),f=async()=>{if(!o){g(!0);try{await S({markerType:n,is24Hours:d,comment:x,photo:v}),r(),t()}catch(s){console.error("Ошибка при сохранении:",s)}finally{g(!1)}}},r=()=>{c("charging"),h(!1),j(""),u(null)};return e.jsxs(C,{isOpen:p,onClose:()=>{t(),r()},children:[e.jsx(M,{}),e.jsxs(I,{children:[e.jsx(k,{children:"Добавить новое место"}),e.jsx(y,{}),e.jsx(F,{children:e.jsxs(b,{spacing:1,children:[e.jsxs(l,{children:[e.jsx(i,{children:"Тип метки"}),e.jsxs(H,{children:[e.jsxs(T,{value:n,onChange:s=>c(s.target.value),children:[e.jsx("option",{value:"charging",children:"Обычная розетка"}),e.jsx("option",{value:"chargingAuto",children:"Автомобильная зарядка"}),e.jsx("option",{value:"interesting",children:"Интересное место"}),e.jsx("option",{value:"danger",children:"Опасное место"}),e.jsx("option",{value:"chat",children:"Разговорчики"})]}),n==="charging"&&e.jsx(B,{isChecked:d,onChange:s=>h(s.target.checked),children:"Ночная"})]})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Комментарий"}),e.jsx(L,{value:x,onChange:s=>j(s.target.value),placeholder:"Опишите место"})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Фото"}),e.jsx(E,{type:"file",accept:"image/*",onChange:s=>u(s.target.files[0])})]})]})}),e.jsxs(A,{children:[e.jsx(m,{colorScheme:"blue",mr:1,onClick:f,isLoading:o,loadingText:"Добавление...",disabled:o,children:"Добавить"}),e.jsx(m,{variant:"ghost",onClick:()=>{t(),r()},children:"Отмена"})]})]})]})};export{R as default};
