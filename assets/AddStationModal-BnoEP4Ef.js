import{r as a,j as e,M as C,a as M,b as k,c as y,d as F,V as b,F as l,S as H,C as T,B as m}from"./index-DZDzlw9q.js";import{M as B,a as I}from"./chunk-RAWN7VJ3-D_fqPAxB.js";import{F as i,I as A}from"./chunk-6CVSDS6C-D2Uf1qSJ.js";import{H as E}from"./chunk-3ASUQ6PA-DMoQnnIS.js";import{T as L}from"./chunk-4IH3O7BJ-DAY6XXGl.js";const q=({isOpen:p,onClose:t,onSave:S})=>{const[o,c]=a.useState("charging"),[d,h]=a.useState(!1),[x,j]=a.useState(""),[f,u]=a.useState(null),[n,g]=a.useState(!1),v=async()=>{if(!n){g(!0);try{await S({markerType:o,is24Hours:d,comment:x,photo:f}),r(),t()}catch(s){console.error("Ошибка при сохранении:",s)}finally{g(!1)}}},r=()=>{c("charging"),h(!1),j(""),u(null)};return e.jsxs(C,{isOpen:p,onClose:()=>{t(),r()},children:[e.jsx(M,{}),e.jsxs(B,{children:[e.jsx(k,{children:"Добавить новое место"}),e.jsx(y,{}),e.jsx(F,{children:e.jsxs(b,{spacing:1,children:[e.jsxs(l,{children:[e.jsx(i,{children:"Тип метки"}),e.jsxs(E,{children:[e.jsxs(H,{value:o,onChange:s=>c(s.target.value),children:[e.jsx("option",{value:"charging",children:"Обычная розетка"}),e.jsx("option",{value:"chargingAuto",children:"Автомобильная зарядка"}),e.jsx("option",{value:"interesting",children:"Интересное место"}),e.jsx("option",{value:"danger",children:"Опасное место"}),e.jsx("option",{value:"chat",children:"Разговорчики"})]}),o==="charging"&&e.jsx(T,{isChecked:d,onChange:s=>h(s.target.checked),children:"Ночная"})]})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Комментарий"}),e.jsx(L,{value:x,onChange:s=>j(s.target.value),placeholder:"Опишите место"})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Фото"}),e.jsx(A,{type:"file",accept:"image/*",onChange:s=>u(s.target.files[0])})]})]})}),e.jsxs(I,{children:[e.jsx(m,{colorScheme:"blue",mr:1,onClick:v,isLoading:n,loadingText:"Добавление...",disabled:n,children:"Добавить"}),e.jsx(m,{variant:"ghost",onClick:()=>{t(),r()},children:"Отмена"})]})]})]})};export{q as default};
